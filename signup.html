<!DOCTYPE html>
<html lang="en" class="h-100">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-eOJMYsd53ii+scO/bJGFsiCZc+5NDVN2yr8+0RDqr0Ql0h+rP48ckxlpbzKgwra6"
      crossorigin="anonymous"
    />

    <title>Sign up</title>

    <style>
      .div1 {
        width: 800px;
        height: 100px;
        padding: 20px;
      }
    </style>
  </head>
  <body class="text-center h-100">
    <div class="container h-100 div1">
      <div class="row justify-content-center align-items-center">
        <div class="col-12 col-md-8 col-lg-6">
          <form id="signup-form">
            <img class="rounded mx-auto d-block" src="pics/map-logo-signup-login.png" alt="" />
            <h1 class="h3 mb-3 fw-normal">NEW TO THE WEBSITE? SIGN UP</h1>
            <div class="form-floating mt-1">
              <input
                type="email"
                class="form-control"
                id="signup-email"
                placeholder="e"
                required
              />
              <label for="signup-email">Email address</label>
            </div>
            <div class="form-floating mt-1">
              <input
                type="password"
                class="form-control"
                id="signup-password"
                placeholder="p"
                required
              />
              <label for="signup-password">Password</label>
            </div>
            <div class="form-floating mt-1">
              <input
                type="tel"
                pattern="[+]{1}91-[0-9]{10}"
                class="form-control"
                id="phone"
                placeholder="p"
                required
              />
              <label for="phone">Phone Number:</label>
            </div>
            <div class="form-floating mt-1">
              <input type="date" class="form-control" id="dob" required />
              <label for="dob">Date of birth:</label>
            </div>
            <button class="w-100 btn btn-lg btn-primary mt-3" type="submit">
              Register
            </button>
            <p class="mt-5 mb-3 text-muted">Â©2021</p>
          </form>
        </div>
      </div>
    </div>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-app.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-auth.js"></script>
    <script src="https://www.gstatic.com/firebasejs/8.6.3/firebase-firestore.js"></script>

    <script>
      var firebaseConfig = {
        apiKey: "AIzaSyDX6goN8ygHPzhyuvXQJTg4mh1tjOd9N5s",
        authDomain: "mindatpeace-afb41.firebaseapp.com",
        projectId: "mindatpeace-afb41",
        storageBucket: "mindatpeace-afb41.appspot.com",
        messagingSenderId: "296042005411",
        appId: "1:296042005411:web:76990cdb00598e7c029016",
      };
      firebase.initializeApp(firebaseConfig);
      const auth = firebase.auth();
      const db = firebase.firestore();
      const signupForm = document.querySelector("#signup-form");
      signupForm.addEventListener("submit", (e) => {
        //   alert("Hemloasdasd");
        e.preventDefault();
        // Get user info
        const email = signupForm["signup-email"].value;
        const password = signupForm["signup-password"].value;
        console.log(email, password);
        // sign up the user
        auth
          .createUserWithEmailAndPassword(email, password)
          .then((cred) => {
            console.log(cred);
            // signupForm.reset();
            return db.collection(cred.user.uid).doc("bio").set({
              email: signupForm["signup-email"].value,
              dateOfBirth: signupForm["dob"].value,
            });
          })
          .then(() => {
            window.location = "index.html";
          });
      });
    </script>
    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-gtEjrD/SeCtmISkJkNUaaKMoLD0//ElJ19smozuHV6z3Iehds+3Ulb9Bn9Plx0x4"
      crossorigin="anonymous"
    ></script>
    <script src="js/firebase.js"></script>
    <script src="js/index.js"></script>
  </body>
</html>
